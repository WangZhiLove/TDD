# 实战

这里直接上代码吧，先不去理解概念的东西，单单从代码上去学习吧。

## 基本原则

实战之前，了解下基本原则，这个也很重要。

TDD 的基本原则是下面两点：

1. 当且仅当存在失败的自动化测试时，才开始编写生产代码
2. 消除代码的坏味道

有了基本原则，将开发工作分成了三步，也就是现在的红/绿/重构：

1. 红：编写一个失败的小测试，甚至可以是无法编译的测试
2. 绿：让这个测试快速通过，甚至不惜犯下任何罪恶
3. 重构：消除上一部中产生的所有坏味道

额外说一点的是什么是代码的坏味道，在我看来，代码的坏味道就是代码重复、冗余等，这就涉及到另外一个知识，代码的重构。

但是看到开发工作之后，我应该从哪开始呢？于是徐昊老师的任务分解法就出现了，将任务列表作为 TDD 的核心要素：

1. 大致构思软件被使用的方式，把握对外接口的方向
2. 大致构思功能的实现方式，划分所需要的组件以及组件间的关系
3. 根据需求的功能描述拆分功能点，功能点要考虑正确路径和边界条件
4. 依照组件以及组件间的关系，将功能拆分到对应组件
5. 针对拆分的结果编写测试，进入红/绿/重构循环

## 需求

先列出需求，需求是什么呢？

```text
我们中的大多数人都不得不时不时地解析一下命令行参数。如果我们没有一个方便的工具，那么我们就简单地处理一下传入 main 函数的字符串数组。
有很多开源工具可以完成这个任务，但它们可能并不能完全满足我们的要求。所以我们再写一个吧。　

传递给程序的参数由标志和值组成。标志应该是一个字符，前面有一个减号。每个标志都应该有零个或多个与之相关的值。
例如：　
-l -p 8080 -d /usr/logs　
“l”（日志）没有相关的值，它是一个布尔标志，如果存在则为 true，不存在则为 false。
“p”（端口）有一个整数值，
“d”（目录）有一个字符串值。
标志后面如果存在多个值，则该标志表示一个列表：　-g this is a list -d 1 2 -3 5　
"g"表示一个字符串列表[“this”, “is”, “a”, “list”]，
“d"标志表示一个整数列表[1, 2, -3, 5]。　
如果参数中没有指定某个标志，那么解析器应该指定一个默认值。
例如，false 代表布尔值，0 代表数字，”"代表字符串，[]代表列表。如果给出的参数与模式不匹配，重要的是给出一个好的错误信息，准确地解释什么是错误的。　确保你的代码是可扩展的，即如何增加新的数值类型是直接和明显的。
```
### API 构思

先看看这个需求，想想一下这个需求写出来的接口应该如何被实现，从测试类开始